<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Assign Dynamic Treatment Rule from Conditional Average Treatment Effect — assign_rule • sherlock</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Assign Dynamic Treatment Rule from Conditional Average Treatment Effect — assign_rule" />
<meta property="og:description" content="Perform the assignment of a treatment rule based on the conditional average
treatment effect (CATE) estimate for each individual in the observed data.
The procedure uses a cost function (see cost_funs) to decide
whether a given unit should be assigned to the treatment or the control
condition based on the estimated CATE. The treatment decision accommodates
both hard thresholding of the CATE (i.e., analytic evaluation of whether it
exceeds a cutoff) and soft thresholding (i.e., assessing difference of the
CATE estimate from a threshold via a one-sided hypothesis test), with the
latter being the default. Uniqueness of the assigned treatment rule within
segmentation strata is the default, allowing for stratum-specific inference;
however, when such inference is not of interest, this may be disabled." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sherlock</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/sherlock_quick_start_netflix.html">`sherlock`: Causal Machine Learning for Segment Discovery</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assign Dynamic Treatment Rule from Conditional Average Treatment Effect</h1>
    
    <div class="hidden name"><code>assign_rule.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Perform the assignment of a treatment rule based on the conditional average
treatment effect (CATE) estimate for each individual in the observed data.
The procedure uses a cost function (see <code><a href='cost_funs.html'>cost_funs</a></code>) to decide
whether a given unit should be assigned to the treatment or the control
condition based on the estimated CATE. The treatment decision accommodates
both hard thresholding of the CATE (i.e., analytic evaluation of whether it
exceeds a cutoff) and soft thresholding (i.e., assessing difference of the
CATE estimate from a threshold via a one-sided hypothesis test), with the
latter being the default. Uniqueness of the assigned treatment rule within
segmentation strata is the default, allowing for stratum-specific inference;
however, when such inference is not of interest, this may be disabled.</p>
    </div>

    <pre class="usage"><span class='fu'>assign_rule</span><span class='op'>(</span><span class='va'>data_with_cate</span>, segment_fun <span class='op'>=</span> <span class='va'>cost_threshold</span>, <span class='va'>...</span>,
  type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"inferential"</span>, <span class='st'>"analytic"</span><span class='op'>)</span>, unique_rule <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data_with_cate</th>
      <td><p>A <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code> containing the
input data, augmented with cross-validated nuisance parameter estimates and
an estimate of the CATE. This input object should b ecreated by successive
calls to <code><a href='set_est_data.html'>set_est_data</a></code> and <code><a href='est_cate.html'>est_cate</a></code>, or through
a wrapper function that composes these function calls automatically.</p></td>
    </tr>
    <tr>
      <th>segment_fun</th>
      <td><p>A particular choice of function for the assignment of a
treatment rule to a segment based on a specified threshold or constraint.
For details on these, consult the documentation in <code><a href='cost_funs.html'>cost_funs</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code>segment_fun</code>. For details,
see the documentation for the cost functions in <code><a href='cost_funs.html'>cost_funs</a></code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>A <code>character</code> string (of length one) specifying how the
treatment decision based on the CATE is to be made. There are two options:</p><ul>
<li><p><code>"inferential"</code> (the default) uses a hypothesis test to evaluate
whether the estimated CATE is statistically different from a threshold
and assigns a treatment decision based on the resultant p-value.</p></li>
<li><p><code>"analytic"</code> simply evaluates whether the estimated CATE exceeds a
given threshold and assigns treatment to segments for which this holds.
Note that in both cases the threshold must be either provided directly (as
an input to <code><a href='cost_funs.html'>cost_threshold</a></code>) or will be discovered based on
specified constraints (as in <code><a href='cost_funs.html'>cost_budget</a></code>).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>unique_rule</th>
      <td><p>A <code>logical</code> indicating whether the treatment rule to
be assigned ought to be unique within segments. The default of <code>TRUE</code>
ensures that all units belonging the the same segment receive an identical
treatment decision. When this is set to <code>FALSE</code>, subsequent utilities
(e.g., <code><a href='summarize_segments.html'>summarize_segments</a></code>) cannot be used to summarize the
assigned treatment rule across segments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code> of the full input data
<code>data_cate_est</code>, augmented with a single additional column <code>rule</code>
that specifies the treatment decision derived from the estimated CATE and a
strategy specified by the segmentation function <code>segment_fun</code>.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nima Hejazi, Wenjing Zheng, Netflix, Inc..</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


